
# 🎨 交互与视觉设计
# 1. 页面结构

- 首页（入口页，展示各 channel）：
  - 顶部显示个人头像（使用欢太账号信息）(点击后进入"我的"页面)；
  - 中部为内容入口（B站/抖音/订阅的 RSS channel），点击进入内容页
  - 底部:添加RSS
  - 本页内容的菜单:
    - 快速操作菜单:
      - 移动到顶部或置顶/标记为已读
      - 注：标记为已读仅对标准RSS生效，B站，抖音不维护未读状态
    - 复杂操作菜单
      - 移动到顶部/置顶/标记为已读/删除

- 内容页（展开显示所选 channel 的 item）：
  - 顶部显示 channel 名称（B站/抖音/具体 RSS 源），点击查看 channel 详细信息；
  - 中部为内容条目（每条包含标题、摘要与缩略图，采用 Image Background Card 样式）；
  - 底部为加载更多和刷新按钮。
  - 本页内容的菜单:
    - 快速操作菜单:
      - 收藏/稍后再看
    - 复杂操作菜单
      - 在找到更多需求前，本页暂时不设复杂操作菜单

- 详情页：
  - 对于标准RSS:
    - 顶部显示收藏与点赞按钮；
    - 中部为内容正文（文字优先）； 
    - 底部显示在浏览器打开(如果提供了item:link)和分享按钮
  - 对于B站:
    - 视频标题
    - 中部显示视频封面,点击进入播放页
    - 作者信息
    - 操作列表(点赞/投币/收藏/分享)
  - 对于抖音:
    - 首次打开进入登录页面(需要调用webview)
    - 后续直接进入短视频播放页面
- "我的" 页面
  - 欢太账号登陆
  - 我的收藏
  - 稍后再看
  - 设置
    - 阅读设置
  - 关于
    - 项目自介
    - 隐私协议
    - 用户协议
    - 开源许可与清单

# 2. 基础交互设计
- **手势操作**：
  - 上滑/下滑：页面滚动/翻页
  - 左滑：
    - 滑动项目调出快速操作菜单 (统一为滑动后出现按钮,点击按钮执行操作)
    - 空白处滑动无动作
  - 右滑：返回上一级
  - 长按：调出复杂操作菜单（仅入口页内容列表）

# 3. 关键流程
## 3.1 添加 RSS（首页 -> 添加）
- 入口：首页底部“添加RSS”
- 输入：RSS URL（必填，可粘贴）
- 校验与解析：
  - 点击“添加”后立即做 URL 合法性校验（scheme/http(s)、长度、空值）
  - 发起拉取并解析 Feed（包含超时与重试按钮）
  - 解析成功后展示确认页：标题/站点/简介（若缺失则显示 URL 域名/“无简介”）
- 重复订阅判断：以规范化后的 URL + Feed 标识（如有）为主，命中则提示“已存在”，提供“跳转到该频道”
- 成功结果：
  - 新增 channel，回到首页列表可见
  - 触发一次后台同步拉取最新条目
- 失败处理：
  - 网络不可用：提示“网络不可用”，提供“重试/取消”
  - 解析失败：提示“不是有效的RSS/Atom”，展示简短原因（如 HTTP 4xx/5xx、超时、内容格式不支持），提供“重试/取消”

## 3.2 频道列表浏览（首页 -> 内容页）
- 入口：点击首页任意 channel
- 进入内容页：
  - 顶部显示 channel 名称；点击进入 channel 详情（后续扩展：编辑/刷新/删除）
  - 首屏加载策略：优先渲染缓存/本地数据；并行触发刷新（成功后增量更新）
- 分页与刷新：
  - “刷新”：拉取最新条目并合并去重；刷新完成后提示“已更新/无更新”
  - “加载更多”：加载更早的条目（优先本地，其次网络）
- 空态：
  - 无条目：提示“暂无内容”，提供“刷新/返回”

## 3.3 条目阅读（内容页 -> 详情页）
- 入口：点击条目卡片进入详情页
- 已读策略（仅标准 RSS 生效）：
  - 进入详情页即标记为“已读”（可配置为“停留超过 N 秒后标记”，后续再加）
  - 返回内容页后更新未读提示
- 详情页动作：
  - “收藏/点赞”：本地即时生效（若后续接入云同步则异步补偿）
  - “浏览器打开”：存在 `item:link` 时展示；无 link 则隐藏或置灰
  - “分享”：分享标题 + link（若无 link 则仅分享标题）

## 3.4 B站登录与内容（首次使用 -> 登录 -> 内容/播放）
- 触发：首次进入 B站 channel 或执行需要鉴权的动作（点赞/收藏/投币/同步稍后再看等）,或手动登陆(按钮放在channel详情页中)
  
- 登录流程：
  - 打开登录页（使用SDK能力展示二维码,同时提供密码登录选项）
  - 登录成功：保存cookies，返回 B站内容页并触发刷新
  - 登录失败/取消：提示“未登录”，提供“重试/返回”
  - 会话过期：请求失败时提示“登录已过期”，引导重新登录
- 播放流程：
  - 内容页点击条目进入详情页，点击封面进入播放页
  - 播放失败：提示“暂无法播放”，提供“重试/浏览器打开（如可用）”

## 3.5 抖音登录与播放（首次使用 -> 登录 -> 播放）
- 触发：未登录状态下进入抖音 channel
- 登录流程：
  - 未登录状态下进入登录页面（WebView）
  - 登录成功：保存cookies，进入短视频播放页
  - 登录失败/取消：提示“登录失败”，提供“重试/返回”
- 播放与切换：
  - 竖屏播放页，上下滑切换下一条/上一条
  - 网络弱/加载慢：展示加载态与重试按钮

## 3.6 收藏/稍后再看（统一能力）
- 入口：
  - 内容页左滑快速菜单：收藏/稍后再看（B站/抖音/RSS一致的操作入口）
  - 详情页：收藏（RSS），以及平台侧动作（B站点赞/投币/收藏）
- 行为约定：
  - “收藏/稍后再看”在应用内统一沉淀为本地列表（后续可云同步）
  - B站侧“稍后再看/历史记录”与应用内列表：首版以“尽量同步、失败不阻塞使用”为原则（同步失败提示但不回滚本地状态）


# 3. 视觉规范
- **主色调**：沿用OPPO品牌色（橘色 #FF6700）作为强调色，搭配中性灰（#F5F5F5/#333333）作为底色
- **图标风格**：线性极简图标，适配手表小屏显示（尺寸：24x24dp）
- **字体**：OPPO Sans 字体，默认字号14sp，支持±2sp调节
- **间距**：元素间距统一为8dp，保证界面整洁不拥挤
- **[系统风格控件](https://www.figma.com/design/ER3EBbZAOPPiFCqg2oTVDc/%E5%9C%86%E8%A1%A8_ColorOS-Watch-UIKit?node-id=0-1&p=f)**
- **[官方控件包](app/libs/heytap-widget-v7.0.18.aar)**
- **[控件包文档](docs/公共控件使用说明V7.0.18.pdf)**

---
# 4.首个正式版功能列表
  ## feed列表页
  - channel title 显示
  - 未读提醒(仅限rss,抖音/B站不做)
  - 自定义rss添加
  - 支持顺序调整
  ## RSS
  - channel 支持 title/description
  - item 支持 title/description/pubDate/guid
  - item 支持 guid/或fallback link/title 去重(同时用于更新判断和未读提醒)
  - item 支持 Media RSS Module
  - item 支持 Content Module
  - 正文强制阅读模式,仅显示纯文本和图/视频,初版不做html渲染,后续考虑引入第三方轻量html引擎
    - 图片设定max-width但不设高度限制
    - 视频显示一个封面+播放图标,点击后跳转播放器页面
  - 支持缓存
  ## B站
  - 支持视频播放
  - 支持登录和个性化推荐
  - 支持点赞/收藏/投币
  - 支持B站账号同步稍后再看/历史记录
  - 播放页面功能同步鸿蒙版本,设计使用OPPO或谷歌规范
  
  ## 抖音
  - 支持账号登录和个性化视频推送获取
  - 支持视频播放
  - 播放页面为竖屏及短视频上下滑动切换单独搭建和优化
  ## 其他功能
  - 应用内的统一的收藏和稍后再看功能
  - 阅读页主题切换与字体大小调节

# 5. 功能细节:
## 去重系统
- 由于暂时没有统一信息流页面,不需要跨channel去重
- 去重优先使用guid,其次使用link,都不提供则使用title
- 丢弃新加载内容中与过去内容重复的内容
## 未读/已读系统
- 首次拉取后全部为已读状态
- 进入item详情页后标为已读
- 未读呈现为title行最右侧一个圆点
## 应用内收藏/稍后再看系统
- 对象:抖音/B站视频,RSS item
- 被收藏/稍后再看的视频需要存链接,但不下载内容到本地
- 被收藏/稍后再看的RSS item需要被完整下载到本地,所有子项目和其中的图片视频都需要被下载
- 暂时不做云同步,首个版本也不做手机版同步
# 🔧 技术概览
## 1. 开发环境
- 开发框架：OPPO Watch 原生开发框架（基于Android 11）
- 开发语言：Kotlin/java(主要语言)+ JavaScript(仅限登录页)
- 测试设备：OPPO Watch X2系列

| 产品名称 | RAM | ROM | CPU | 分辨率 | 屏幕尺寸 | 操作系统 | Android 版本 | 支持的网络类型 |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| **OPPO Watch X2** | **2GB** | **32GB** | **高通骁龙 W5 & BES2800BP** | **466x466** | **1.5 英寸/233dpi** | **ColorOS Watch 7.0** | **11** | **蓝牙网络 eSIM WLAN** |

## 2. 核心技术点概览
| 技术模块 | 实现方案 | 备注 |
|----------|----------|------|
| 第三方内容接入 | B站/抖音开放API<br>RSS解析：使用 RSS-Parser（com.prof18.rssparser） | 需申请第三方API密钥，遵守平台接口规范 |
| 数据存储 | 本地：SharedPreferences（配置信息）<br>云端：OPPO云服务（自定义订阅源和顺序同步）日志式,按时间合并/最后写入覆盖 | 敏感信息加密存储，仅同步用户主动开启的内容，v1不做云同步 |
| 功耗与体验优化 | 加载当前可视区域内容和下方的三条内容,被加载的内容预加载全部文字和第一个图片<br> 使用轻量化SDK/引擎和原生开发| 目标：单次满电可支持5小时连续文本阅读，3小时连续视频播放（暂定） |
| 适配兼容 | 适配尺寸1.5寸左右的方圆两种表 | 优先做圆形 |
